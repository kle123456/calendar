(function(L,h){"object"===typeof exports&&"object"===typeof module?module.exports=h(require("echarts")):"function"===typeof define&&define.amd?define(["echarts"],h):"object"===typeof exports?exports["echarts-wordcloud"]=h(require("echarts")):L["echarts-wordcloud"]=h(L.echarts)})(this,function(L){return function(h){function l(d){if(g[d])return g[d].exports;var a=g[d]={exports:{},id:d,loaded:!1};h[d].call(a.exports,a,a.exports,l);a.loaded=!0;return a.exports}var g={};l.m=h;l.c=g;l.p="";return l(0)}([function(h,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                l,g){h.exports=g(1)},function(h,l,g){function d(a){var b=a.getContext("2d");a=b.getImageData(0,0,a.width,a.height);for(var f=b.createImageData(a),c=0;c<a.data.length;c+=4){var d=a.data[c]+a.data[c+1]+a.data[c+2];128>a.data[c+3]||384<d?(f.data[c]=0,f.data[c+1]=0,f.data[c+2]=0,f.data[c+3]=0):(f.data[c]=255,f.data[c+1]=255,f.data[c+2]=255,f.data[c+3]=255)}b.putImageData(f,0,0)}var a=g(2),b=g(3);g(11);g(13);var c=g(14);if(!c.isSupported)throw Error("Sorry your browser not support wordCloud");a.registerLayout(function(n,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       p){n.eachSeriesByType("wordCloud",function(f){var k=b.getLayoutRect(f.getBoxLayoutParams(),{width:p.getWidth(),height:p.getHeight()}),N=f.getData(),e=document.createElement("canvas");e.width=k.width;e.height=k.height;var z=e.getContext("2d"),g=f.get("maskImage");if(g)try{z.drawImage(g,0,0,e.width,e.height),d(e)}catch(P){console.error("Invalid mask image"),console.error(P.toString())}var m=f.get("sizeRange"),z=f.get("rotationRange"),O=N.getDataExtent("value"),G=Math.PI/180,h=f.get("gridSize");c(e,
    {list:N.mapArray("value",function(b,e){var c=N.getItemModel(e);return[N.getName(e),c.get("textStyle.normal.textSize",!0)||a.number.linearMap(b,O,m),e]}).sort(function(a,b){return b[1]-a[1]}),fontFamily:f.get("textStyle.normal.fontFamily")||f.get("textStyle.emphasis.fontFamily")||n.get("textStyle.fontFamily"),fontWeight:f.get("textStyle.normal.fontWeight")||f.get("textStyle.emphasis.fontWeight")||n.get("textStyle.fontWeight"),gridSize:h,ellipticity:k.height/k.width,minRotation:z[0]*G,maxRotation:z[1]*
    G,clearCanvas:!g,rotateRatio:1,rotationStep:f.get("rotationStep")*G,drawOutOfBound:!1,shuffle:!1,shape:f.get("shape")});e.addEventListener("wordclouddrawn",function(a){var b=a.detail.item;a.detail.drawn&&f.layoutInstance.ondraw&&(a.detail.drawn.gx+=k.x/h,a.detail.drawn.gy+=k.y/h,f.layoutInstance.ondraw(b[0],b[1],b[2],a.detail.drawn))});f.layoutInstance={ondraw:null}})})},function(h,l){h.exports=L},function(h,l,g){function d(a,b,c,f,n){var d=0,k=0;null==f&&(f=Infinity);null==n&&(n=Infinity);var p=
    0;b.eachChild(function(g,w){var B=g.position,r=g.getBoundingRect(),A=b.childAt(w+1),A=A&&A.getBoundingRect(),M,h;"horizontal"===a?(A=r.width+(A?-A.x+r.x:0),M=d+A,M>f||g.newline?(d=0,M=A,k+=p+c,p=r.height):p=Math.max(p,r.height)):(A=r.height+(A?-A.y+r.y:0),h=k+A,h>n||g.newline?(d+=p+c,k=0,h=A,p=r.width):p=Math.max(p,r.width));g.newline||(B[0]=d,B[1]=k,"horizontal"===a?d=M+c:k=h+c)})}var a=g(4),b=g(6);l=g(9);var c=g(10),n=l.parsePercent,p=a.each,f={},k="left right top bottom width height".split(" ");
    f.box=d;f.vbox=a.curry(d,"vertical");f.hbox=a.curry(d,"horizontal");f.getAvailableSize=function(a,b,f){var d=b.width;b=b.height;var m=n(a.x,d),k=n(a.y,b),p=n(a.x2,d),g=n(a.y2,b);(isNaN(m)||isNaN(parseFloat(a.x)))&&(m=0);(isNaN(p)||isNaN(parseFloat(a.x2)))&&(p=d);(isNaN(k)||isNaN(parseFloat(a.y)))&&(k=0);(isNaN(g)||isNaN(parseFloat(a.y2)))&&(g=b);f=c.normalizeCssArray(f||0);return{width:Math.max(p-m-f[1]-f[3],0),height:Math.max(g-k-f[0]-f[2],0)}};f.getLayoutRect=function(a,e,f){f=c.normalizeCssArray(f||
        0);var d=e.width;e=e.height;var k=n(a.left,d),p=n(a.top,e),g=n(a.right,d),h=n(a.bottom,e),l=n(a.width,d),w=n(a.height,e),B=f[2]+f[0],r=f[1]+f[3],A=a.aspect;isNaN(l)&&(l=d-g-r-k);isNaN(w)&&(w=e-h-B-p);isNaN(l)&&isNaN(w)&&(A>d/e?l=.8*d:w=.8*e);null!=A&&(isNaN(l)&&(l=A*w),isNaN(w)&&(w=l/A));isNaN(k)&&(k=d-g-l-r);isNaN(p)&&(p=e-h-w-B);switch(a.left||a.right){case "center":k=d/2-l/2-f[3];break;case "right":k=d-l-r}switch(a.top||a.bottom){case "middle":case "center":p=e/2-w/2-f[0];break;case "bottom":p=
        e-w-B}k=k||0;p=p||0;isNaN(l)&&(l=d-k-(g||0));isNaN(w)&&(w=e-p-(h||0));a=new b(k+f[3],p+f[0],l,w);a.margin=f;return a};f.positionGroup=function(b,e,c,d){var n=b.getBoundingRect();e=a.extend(a.clone(e),{width:n.width,height:n.height});e=f.getLayoutRect(e,c,d);b.position=[e.x-n.x,e.y-n.y]};f.mergeLayoutParam=function(b,e,f){function c(a){var d={},n=0,k={},g=0,m=f.ignoreSize?1:2;p(a,function(a){k[a]=b[a]});p(a,function(a){e.hasOwnProperty(a)&&(d[a]=k[a]=e[a]);null!=d[a]&&"auto"!==d[a]&&n++;null!=k[a]&&
    "auto"!==k[a]&&g++});if(g!==m&&n){if(!(n>=m))for(m=0;m<a.length;m++){var h=a[m];if(!d.hasOwnProperty(h)&&b.hasOwnProperty(h)){d[h]=b[h];break}}return d}return k}function d(a,b,f){p(a,function(a){b[a]=f[a]})}!a.isObject(f)&&(f={});var n=["width","left","right"],k=["height","top","bottom"],g=c(n),h=c(k);d(n,b,g);d(k,b,h)};f.getLayoutParams=function(a){return f.copyLayoutParams({},a)};f.copyLayoutParams=function(a,b){b&&a&&p(k,function(f){b.hasOwnProperty(f)&&(a[f]=b[f])});return a};h.exports=f},function(h,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               l,g){function d(a){if("object"==typeof a&&null!==a){var b=a;if(a instanceof Array)for(var b=[],c=0,e=a.length;c<e;c++)b[c]=d(a[c]);else if(!p(a)&&!f(a))for(c in b={},a)a.hasOwnProperty(c)&&(b[c]=d(a[c]));return b}return a}function a(b,e,k){if(!n(e)||!n(b))return k?d(e):b;for(var m in e)if(e.hasOwnProperty(m)){var g=b[m],h=e[m];!n(h)||!n(g)||c(h)||c(g)||f(h)||f(g)||p(h)||p(g)?!k&&m in b||(b[m]=d(e[m],!0)):a(g,h,k)}return b}function b(a,b,f){for(var c in b)b.hasOwnProperty(c)&&(f?null!=b[c]:null==a[c])&&
(a[c]=b[c]);return a}function c(a){return"[object Array]"===e.call(a)}function n(a){var b=typeof a;return"function"===b||!!a&&"object"==b}function p(a){return!!N[e.call(a)]||a instanceof k}function f(a){return a&&1===a.nodeType&&"string"==typeof a.nodeName}var k=g(5),N={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},e=Object.prototype.toString;l=Array.prototype;var z=l.forEach,t=l.filter,m=l.slice,O=l.map,G=l.reduce,R,P={inherits:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        b){function c(){}var f=a.prototype;c.prototype=b.prototype;a.prototype=new c;for(var e in f)a.prototype[e]=f[e];a.prototype.constructor=a;a.superClass=b},mixin:function(a,c,f){a="prototype"in a?a.prototype:a;c="prototype"in c?c.prototype:c;b(a,c,f)},clone:d,merge:a,mergeAll:function(b,c){for(var f=b[0],e=1,d=b.length;e<d;e++)f=a(f,b[e],c);return f},extend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},defaults:b,getContext:function(){R||(R=P.createCanvas().getContext("2d"));
    return R},createCanvas:function(){return document.createElement("canvas")},indexOf:function(a,b){if(a){if(a.indexOf)return a.indexOf(b);for(var c=0,f=a.length;c<f;c++)if(a[c]===b)return c}return-1},slice:function(){return Function.call.apply(m,arguments)},find:function(a,b,c){if(a&&b)for(var f=0,e=a.length;f<e;f++)if(b.call(c,a[f],f,a))return a[f]},isArrayLike:function(a){if(a)return"string"==typeof a?!1:"number"==typeof a.length},each:function(a,b,c){if(a&&b)if(a.forEach&&a.forEach===z)a.forEach(b,
    c);else if(a.length===+a.length)for(var f=0,e=a.length;f<e;f++)b.call(c,a[f],f,a);else for(f in a)a.hasOwnProperty(f)&&b.call(c,a[f],f,a)},map:function(a,b,c){if(a&&b){if(a.map&&a.map===O)return a.map(b,c);for(var f=[],e=0,d=a.length;e<d;e++)f.push(b.call(c,a[e],e,a));return f}},reduce:function(a,b,c,f){if(a&&b){if(a.reduce&&a.reduce===G)return a.reduce(b,c,f);for(var e=0,d=a.length;e<d;e++)c=b.call(f,c,a[e],e,a);return c}},filter:function(a,b,c){if(a&&b){if(a.filter&&a.filter===t)return a.filter(b,
    c);for(var f=[],e=0,d=a.length;e<d;e++)b.call(c,a[e],e,a)&&f.push(a[e]);return f}},bind:function(a,b){var c=m.call(arguments,2);return function(){return a.apply(b,c.concat(m.call(arguments)))}},curry:function(a){var b=m.call(arguments,1);return function(){return a.apply(this,b.concat(m.call(arguments)))}},isArray:c,isString:function(a){return"[object String]"===e.call(a)},isObject:n,isFunction:function(a){return"function"===typeof a},isBuildInObject:p,isDom:f,retrieve:function(a){for(var b=0,c=arguments.length;b<
c;b++)if(null!=arguments[b])return arguments[b]},assert:function(a,b){if(!a)throw Error(b);},noop:function(){}};h.exports=P},function(h,l){var g=function(d){this.colorStops=d||[]};g.prototype={constructor:g,addColorStop:function(d,a){this.colorStops.push({offset:d,color:a})}};h.exports=g},function(h,l,g){function d(a,b,c,e){this.x=a;this.y=b;this.width=c;this.height=e}l=g(7);var a=g(8),b=l.applyTransform,c=Math.min,n=Math.abs,p=Math.max;d.prototype={constructor:d,union:function(a){var b=c(a.x,this.x),
    d=c(a.y,this.y);this.width=p(a.x+a.width,this.x+this.width)-b;this.height=p(a.y+a.height,this.y+this.height)-d;this.x=b;this.y=d},applyTransform:function(){var a=[],d=[];return function(g){g&&(a[0]=this.x,a[1]=this.y,d[0]=this.x+this.width,d[1]=this.y+this.height,b(a,a,g),b(d,d,g),this.x=c(a[0],d[0]),this.y=c(a[1],d[1]),this.width=n(d[0]-a[0]),this.height=n(d[1]-a[1]))}}(),calculateTransform:function(b){var c=b.width/this.width,d=b.height/this.height,e=a.create();a.translate(e,e,[-this.x,-this.y]);
    a.scale(e,e,[c,d]);a.translate(e,e,[b.x,b.y]);return e},intersect:function(a){var b=this.x,c=this.y,e=this.y+this.height,d=a.x+a.width,n=a.y,m=a.y+a.height;return!(this.x+this.width<a.x||d<b||e<n||m<c)},contain:function(a,b){return a>=this.x&&a<=this.x+this.width&&b>=this.y&&b<=this.y+this.height},clone:function(){return new d(this.x,this.y,this.width,this.height)},copy:function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height}};h.exports=d},function(h,l){var g="undefined"===typeof Float32Array?
    Array:Float32Array,d={create:function(a,b){var c=new g(2);c[0]=a||0;c[1]=b||0;return c},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},clone:function(a){var b=new g(2);b[0]=a[0];b[1]=a[1];return b},set:function(a,b,c){a[0]=b;a[1]=c;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a},scaleAndAdd:function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;return a},sub:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a},len:function(a){return Math.sqrt(this.lenSquare(a))},lenSquare:function(a){return a[0]*
    a[0]+a[1]*a[1]},mul:function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a},div:function(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},scale:function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a},normalize:function(a,b){var c=d.len(b);0===c?(a[0]=0,a[1]=0):(a[0]=b[0]/c,a[1]=b[1]/c);return a},distance:function(a,b){return Math.sqrt((a[0]-b[0])*(a[0]-b[0])+(a[1]-b[1])*(a[1]-b[1]))},distanceSquare:function(a,b){return(a[0]-b[0])*(a[0]-b[0])+(a[1]-b[1])*(a[1]-
    b[1])},negate:function(a,b){a[0]=-b[0];a[1]=-b[1];return a},lerp:function(a,b,c,d){a[0]=b[0]+d*(c[0]-b[0]);a[1]=b[1]+d*(c[1]-b[1]);return a},applyTransform:function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b+c[4];a[1]=c[1]*d+c[3]*b+c[5];return a},min:function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a},max:function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a}};d.length=d.len;d.lengthSquare=d.lenSquare;d.dist=d.distance;d.distSquare=d.distanceSquare;h.exports=
    d},function(h,l){var g="undefined"===typeof Float32Array?Array:Float32Array,d={create:function(){var a=new g(6);d.identity(a);return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},mul:function(a,b,c){var d=b[1]*c[0]+b[3]*c[1],g=b[0]*c[2]+b[2]*c[3],f=b[1]*c[2]+b[3]*c[3],k=b[0]*c[4]+b[2]*c[5]+b[4],h=b[1]*c[4]+b[3]*c[5]+b[5];a[0]=b[0]*c[0]+b[2]*c[1];a[1]=d;a[2]=g;a[3]=f;a[4]=k;a[5]=h;
    return a},translate:function(a,b,c){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4]+c[0];a[5]=b[5]+c[1];return a},rotate:function(a,b,c){var d=b[0],g=b[2],f=b[4],k=b[1],h=b[3];b=b[5];var e=Math.sin(c);c=Math.cos(c);a[0]=d*c+k*e;a[1]=-d*e+k*c;a[2]=g*c+h*e;a[3]=-g*e+c*h;a[4]=c*f+e*b;a[5]=c*b-e*f;return a},scale:function(a,b,c){var d=c[0];c=c[1];a[0]=b[0]*d;a[1]=b[1]*c;a[2]=b[2]*d;a[3]=b[3]*c;a[4]=b[4]*d;a[5]=b[5]*c;return a},invert:function(a,b){var c=b[0],d=b[2],g=b[4],f=b[1],k=b[3],h=b[5],e=c*k-
    f*d;if(!e)return null;e=1/e;a[0]=k*e;a[1]=-f*e;a[2]=-d*e;a[3]=c*e;a[4]=(d*h-k*g)*e;a[5]=(f*g-c*h)*e;return a}};h.exports=d},function(h,l){var g={linearMap:function(d,a,b,c){var n=a[1]-a[0],g=b[1]-b[0];if(0===n)return 0===g?b[0]:(b[0]+b[1])/2;if(c)if(0<n){if(d<=a[0])return b[0];if(d>=a[1])return b[1]}else{if(d>=a[0])return b[0];if(d<=a[1])return b[1]}else{if(d===a[0])return b[0];if(d===a[1])return b[1]}return(d-a[0])/n*g+b[0]},parsePercent:function(d,a){switch(d){case "center":case "middle":d="50%";
    break;case "left":case "top":d="0%";break;case "right":case "bottom":d="100%"}return"string"===typeof d?d.replace(/^\s+/,"").replace(/\s+$/,"").match(/%$/)?parseFloat(d)/100*a:parseFloat(d):null==d?NaN:+d},round:function(d){return+(+d).toFixed(10)},asc:function(d){d.sort(function(a,b){return a-b});return d},getPrecision:function(d){if(isNaN(d))return 0;for(var a=1,b=0;Math.round(d*a)/a!==d;)a*=10,b++;return b},getPixelPrecision:function(d,a){var b=Math.log,c=Math.LN10,n=Math.floor(b(d[1]-d[0])/c),
    b=Math.round(b(Math.abs(a[1]-a[0]))/c);return Math.max(-n+b,0)},MAX_SAFE_INTEGER:9007199254740991,remRadian:function(d){var a=2*Math.PI;return(d%a+a)%a},isRadianAroundZero:function(d){return-1E-4<d&&1E-4>d},parseDate:function(d){return d instanceof Date?d:new Date("string"===typeof d?d.replace(/-/g,"/"):Math.round(d))},quantity:function(d){return Math.pow(10,Math.floor(Math.log(d)/Math.LN10))},nice:function(d,a){var b=g.quantity(d),c=d/b;return(a?1.5>c?1:2.5>c?2:4>c?3:7>c?5:10:1>c?1:2>c?2:3>c?3:5>
    c?5:10)*b}};h.exports=g},function(h,l,g){function d(a){return 10>a?"0"+a:a}var a=g(4),b=g(9),c="abcdefg".split("");h.exports={normalizeCssArray:function(a){var b=a.length;return"number"===typeof a?[a,a,a,a]:2===b?[a[0],a[1],a[0],a[1]]:3===b?[a[0],a[1],a[2],a[1]]:a},addCommas:function(a){if(isNaN(a))return"-";a=(a+"").split(".");return a[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(1<a.length?"."+a[1]:"")},toCamelCase:function(a){return a.toLowerCase().replace(/-(.)/g,function(a,b){return b.toUpperCase()})},
    encodeHTML:function(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},formatTpl:function(b,d){a.isArray(d)||(d=[d]);var f=d.length;if(!f)return"";for(var g=d[0].$vars,h=0;h<g.length;h++){var e=c[h];b=b.replace("{"+e+"}","{"+e+0+"}")}for(h=0;h<f;h++)for(e=0;e<g.length;e++)b=b.replace("{"+c[e]+(null==h?"":h)+"}",d[h][g[e]]);return b},formatTime:function(a,c){if("week"===a||"month"===a||"quarter"===a||"half-year"===a||"year"===
        a)a="MM-dd\nyyyy";var f=b.parseDate(c),g=f.getFullYear(),h=f.getMonth()+1,e=f.getDate(),l=f.getHours(),t=f.getMinutes(),f=f.getSeconds();return a=a.replace("MM",d(h)).toLowerCase().replace("yyyy",g).replace("yy",g%100).replace("dd",d(e)).replace("d",e).replace("hh",d(l)).replace("h",l).replace("mm",d(t)).replace("m",t).replace("ss",d(f)).replace("s",f)}}},function(h,l,g){var d=g(12),a=g(2);a.extendSeriesModel({type:"series.wordCloud",visualColorAccessPath:"textStyle.normal.color",optionUpdated:function(){var a=
    this.option;a.gridSize=Math.max(Math.floor(a.gridSize),4)},getInitialData:function(b,c){var g=d(["value"],b.data),g=new a.List(g,this);g.initData(b.data);return g},defaultOption:{maskImage:null,shape:"circle",left:"center",top:"center",width:"70%",height:"80%",sizeRange:[12,60],rotationRange:[-90,90],rotationStep:45,gridSize:8,textStyle:{normal:{fontWeight:"normal"}}}})},function(h,l,g){function d(b){return a.isArray(b)?b:a.isObject(b)?b.value:b}var a=g(4);h.exports=function(b,c,g,h){if(!c)return b;
    var f=d(c[0]),f=a.isArray(f)&&f.length||1;g=g||[];h=h||"extra";for(var k=0;k<f;k++)if(!b[k]){var l=g[k]||h+(k-g.length),e=k,z;a:{z=c;for(var t=k,m=0,O=z.length;m<O;m++){var G=d(z[m]);if(!a.isArray(G))break;G=G[t];if(null!=G&&isFinite(G))break;else if(a.isString(G)&&"-"!==G){z=!0;break a}}z=!1}b[e]=z?{type:"ordinal",name:l}:l}return b}},function(h,l,g){var d=g(2);d.extendChartView({type:"wordCloud",render:function(a,b,c){var g=this.group;g.removeAll();var h=a.getData(),f=a.get("gridSize");a.layoutInstance.ondraw=
    function(a,b,c,l){var t=h.getItemModel(c),m=t.getModel("textStyle.normal"),t=t.getModel("textStyle.emphasis"),O=function(a,c){var d=a.ecModel,e=d&&d.getModel("textStyle");return["fontStyle","fontWeight","fontSize","fontFamily"].map(function(d,f){return 2!==f?a.getShallow(d)||c.getShallow(d)||e&&e.getShallow(d):(a.getShallow(d,!0)||Math.round(a===m?b:c.getShallow(d,!0)||b))+"px"}).join(" ")};a=new d.graphic.Text({style:{x:l.info.fillTextOffsetX,y:l.info.fillTextOffsetY+.5*b,text:a,textBaseline:"middle",
        font:O(m,t)},scale:[1/l.info.mu,1/l.info.mu],position:[(l.gx+l.info.gw/2)*f,(l.gy+l.info.gh/2)*f],rotation:l.rot});a.setStyle(m.getItemStyle());a.setStyle({fill:h.getItemVisual(c,"color")});g.add(a);h.setItemGraphicEl(c,a);d.graphic.setHoverStyle(a,d.util.extend(t.getItemStyle(),{font:O(t,m)}))}}})},function(h,l,g){var d,a;"use strict";window.setImmediate||(window.setImmediate=function(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(!window.postMessage||
        !window.addEventListener)return null;var a=[void 0];window.addEventListener("message",function(c){"string"===typeof c.data&&"zero-timeout-message"===c.data.substr(0,20)&&(c.stopImmediatePropagation(),c=parseInt(c.data.substr(20),36),a[c]&&(a[c](),a[c]=void 0))},!0);window.clearImmediate=function(c){a[c]&&(a[c]=void 0)};return function(c){var d=a.length;a.push(c);window.postMessage("zero-timeout-message"+d.toString(36),"*");return d}}()||function(a){window.setTimeout(a,0)}}());window.clearImmediate||
(window.clearImmediate=function(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(a){window.clearTimeout(a)}}());(function(b){var c=function(){var a=document.createElement("canvas");if(!a||!a.getContext)return!1;a=a.getContext("2d");return a.getImageData&&a.fillText&&Array.prototype.some&&Array.prototype.push?!0:!1}(),g=function(){if(c){for(var a=document.createElement("canvas").getContext("2d"),b=20,d,e;b;){a.font=b.toString(10)+
    "px sans-serif";if(a.measureText("\uff37").width===d&&a.measureText("m").width===e)return b+1;d=a.measureText("\uff37").width;e=a.measureText("m").width;b--}return 0}}(),p=function(a,b){function d(a,b){return"hsl("+(360*Math.random()).toFixed()+","+(30*Math.random()+70).toFixed()+"%,"+(Math.random()*(b-a)+a).toFixed()+"%)"}if(c){Array.isArray(a)||(a=[a]);a.forEach(function(b,c){if("string"===typeof b){if(a[c]=document.getElementById(b),!a[c])throw"The element id specified is not found.";}else if(!b.tagName&&
    !b.appendChild)throw"You must pass valid HTML elements, or ID of the element.";});var e={list:[],fontFamily:'"Trebuchet MS", "Heiti TC", "\u5fae\u8edf\u6b63\u9ed1\u9ad4", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minSize:0,weightFactor:1,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,drawOutOfBound:!1,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/
2,rotationStep:.1,shuffle:!0,rotateRatio:.1,shape:"circle",ellipticity:.65,classes:null,hover:null,click:null};if(b)for(var h in b)h in e&&(e[h]=b[h]);if("function"!==typeof e.weightFactor){var l=e.weightFactor;e.weightFactor=function(a){return a*l}}if("function"!==typeof e.shape)switch(e.shape){default:e.shape="circle";break;case "cardioid":e.shape=function(a){return 1-Math.sin(a)};break;case "diamond":case "square":e.shape=function(a){a%=2*Math.PI/4;return 1/(Math.cos(a)+Math.sin(a))};break;case "triangle-forward":e.shape=
    function(a){a%=2*Math.PI/3;return 1/(Math.cos(a)+Math.sqrt(3)*Math.sin(a))};break;case "triangle":case "triangle-upright":e.shape=function(a){a=(a+3*Math.PI/2)%(2*Math.PI/3);return 1/(Math.cos(a)+Math.sqrt(3)*Math.sin(a))};break;case "pentagon":e.shape=function(a){a=(a+.955)%(2*Math.PI/5);return 1/(Math.cos(a)+.726543*Math.sin(a))};break;case "star":e.shape=function(a){var b=(a+.955)%(2*Math.PI/10);return 0<=(a+.955)%(2*Math.PI/5)-2*Math.PI/10?1/(Math.cos(2*Math.PI/10-b)+3.07768*Math.sin(2*Math.PI/
    10-b)):1/(Math.cos(b)+3.07768*Math.sin(b))}}e.gridSize=Math.max(Math.floor(e.gridSize),4);var m=e.gridSize,p=m-e.maskGapWidth,G=Math.abs(e.maxRotation-e.minRotation),R=Math.min(e.maxRotation,e.minRotation),P=e.rotationStep,w,B,r,A,M,L,Q;switch(e.color){case "random-dark":Q=function(){return d(10,50)};break;case "random-light":Q=function(){return d(50,90)};break;default:"function"===typeof e.color&&(Q=e.color)}var T=null;"function"===typeof e.classes&&(T=e.classes);var U=!1,V=[],W,aa=function(a){var b=
    a.currentTarget,c=b.getBoundingClientRect(),d;a.touches?(d=a.touches[0].clientX,a=a.touches[0].clientY):(d=a.clientX,a=a.clientY);return V[Math.floor((d-c.left)*(b.width/c.width||1)/m)][Math.floor((a-c.top)*(b.height/c.height||1)/m)]},ba=function(a){var b=aa(a);W!==b&&((W=b)?e.hover(b.item,b.dimension,a):e.hover(void 0,void 0,a))},X=function(a){var b=aa(a);b&&(e.click(b.item,b.dimension,a),a.preventDefault())},Y=[],Z=function(){return 0<e.abortThreshold&&(new Date).getTime()-L>e.abortThreshold},ca=
    function(b,c,d,g,h,l,k,n,p){var q=d.fontSize,r;r=Q?Q(g,h,q,l,k):e.color;var u;u=T?T(g,h,q,l,k):e.classes;a.forEach(function(a){if(a.getContext){a=a.getContext("2d");var f=d.mu;a.save();a.scale(1/f,1/f);a.font=e.fontWeight+" "+(q*f).toString(10)+"px "+e.fontFamily;a.fillStyle=r;a.translate((b+d.gw/2)*m*f,(c+d.gh/2)*m*f);0!==n&&a.rotate(-n);a.textBaseline="middle";a.fillText(g,d.fillTextOffsetX*f,(d.fillTextOffsetY+.5*q)*f);a.restore()}else{var f=document.createElement("span"),h="",h="rotate("+-n/Math.PI*
        180+"deg) ";1!==d.mu&&(h+="translateX(-"+d.fillTextWidth/4+"px) scale("+1/d.mu+")");h={position:"absolute",display:"block",font:e.fontWeight+" "+q*d.mu+"px "+e.fontFamily,left:(b+d.gw/2)*m+d.fillTextOffsetX+"px",top:(c+d.gh/2)*m+d.fillTextOffsetY+"px",width:d.fillTextWidth+"px",height:d.fillTextHeight+"px",lineHeight:q+"px",whiteSpace:"nowrap",transform:h,webkitTransform:h,msTransform:h,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"};r&&(h.color=r);f.textContent=
        g;for(var l in h)f.style[l]=h[l];if(p)for(var k in p)f.setAttribute(k,p[k]);u&&(f.className+=u);a.appendChild(f)}})},da=function(b){var c,d,h;Array.isArray(b)?(c=b[0],d=b[1]):(c=b.word,d=b.weight,h=b.attributes);var l=0===e.rotateRatio||Math.random()>e.rotateRatio?0:0===G?R:R+Math.round(Math.random()*G/P)*P,k;var K=c;k=e.weightFactor(d);if(k<=e.minSize)k=!1;else{var x=1;if(k<g)for(x=2;x*k<g;)x+=2;var I=document.createElement("canvas"),q=I.getContext("2d",{willReadFrequently:!0});q.font=e.fontWeight+
    " "+(k*x).toString(10)+"px "+e.fontFamily;var E=q.measureText(K).width/x,u=Math.max(k*x,q.measureText("m").width,q.measureText("\uff37").width)/x,y,J,v=Math.ceil(3*u/m);y=Math.ceil((E+2*u)/m)*m;J=v*m;var v=-E/2,H=.4*-u,C=Math.ceil((y*Math.abs(Math.sin(l))+J*Math.abs(Math.cos(l)))/m);y=Math.ceil((y*Math.abs(Math.cos(l))+J*Math.abs(Math.sin(l)))/m);J=y*m;var D=C*m;I.setAttribute("width",J);I.setAttribute("height",D);q.scale(1/x,1/x);q.translate(J*x/2,D*x/2);q.rotate(-l);q.font=e.fontWeight+" "+(k*x).toString(10)+
    "px "+e.fontFamily;q.fillStyle="#000";q.textBaseline="middle";q.fillText(K,v*x,(H+.5*k)*x);K=q.getImageData(0,0,J,D).data;if(Z())k=!1;else{for(var I=[],q=y,z,t,F=[C/2,y/2,C/2,y/2];q--;)for(D=C;D--;)b:for(t=m;t--;)for(z=m;z--;)if(K[4*((D*m+t)*J+(q*m+z))+3]){I.push([q,D]);q<F[3]&&(F[3]=q);q>F[1]&&(F[1]=q);D<F[0]&&(F[0]=D);D>F[2]&&(F[2]=D);break b}k={mu:x,occupied:I,bounds:F,gw:y,gh:C,fillTextOffsetX:v,fillTextOffsetY:H,fillTextWidth:E,fillTextHeight:u,fontSize:k}}}if(!k||Z()||!e.drawOutOfBound&&(x=
        k.bounds,x[1]-x[3]+1>B||x[2]-x[0]+1>r))return!1;for(x=M+1;x--;){E=M-x;if(Y[E])E=Y[E];else{v=u=8*E;H=[];for(0===E&&H.push([A[0],A[1],0]);v--;)C=1,"circle"!==e.shape&&(C=e.shape(v/u*2*Math.PI)),H.push([A[0]+E*C*Math.cos(-v/u*2*Math.PI),A[1]+E*C*Math.sin(-v/u*2*Math.PI)*e.ellipticity,v/u*2*Math.PI]);E=Y[E]=H}if(e.shuffle)for(u=E=[].concat(E),H=v=void 0,C=u.length;C;v=Math.floor(Math.random()*C),H=u[--C],u[C]=u[v],u[v]=H);for(u=0;u<E.length;u++){C=E[u];v=Math.floor(C[0]-k.gw/2);H=Math.floor(C[1]-k.gh/
    2);b:{y=k.occupied;for(J=y.length;J--;)if(K=v+y[J][0],I=H+y[J][1],K>=B||I>=r||0>K||0>I){if(!e.drawOutOfBound){y=!1;break b}}else if(!w[K][I]){y=!1;break b}y=!0}if(y){ca(v,H,k,c,d,M-x,C[2],l,h);C=v;y=H;z=k;J=b;K=z.occupied;I=e.drawMask;q=void 0;I&&(q=a[0].getContext("2d"),q.save(),q.fillStyle=e.maskColor);D=void 0;U&&(D=z.bounds,D={x:(C+D[3])*m,y:(y+D[0])*m,w:(D[1]-D[3]+1)*m,h:(D[2]-D[0]+1)*m});for(z=K.length;z--;)if(t=C+K[z][0],F=y+K[z][1],!(t>=B||F>=r||0>t||0>F)){var L=I,N=D,Q=J;t>=B||F>=r||0>t||
0>F||(w[t][F]=!1,L&&a[0].getContext("2d").fillRect(t*m,F*m,p,p),U&&(V[t][F]={item:Q,dimension:N}))}I&&q.restore();v={gx:v,gy:H,rot:l,info:k}}else v=!1;if(v)return v}}return null},S=function(b,c,d){if(c)return!a.some(function(a){var e=document.createEvent("CustomEvent");e.initCustomEvent(b,!0,c,d||{});return!a.dispatchEvent(e)},this);a.forEach(function(a){var e=document.createEvent("CustomEvent");e.initCustomEvent(b,!0,c,d||{});a.dispatchEvent(e)},this)};(function(){var b=a[0];if(b.getContext)B=Math.ceil(b.width/
    m),r=Math.ceil(b.height/m);else{var c=b.getBoundingClientRect();B=Math.ceil(c.width/m);r=Math.ceil(c.height/m)}if(S("wordcloudstart",!0)){A=e.origin?[e.origin[0]/m,e.origin[1]/m]:[B/2,r/2];M=Math.floor(Math.sqrt(B*B+r*r));w=[];var d,g;if(!b.getContext||e.clearCanvas)for(a.forEach(function(a){a.getContext?(a=a.getContext("2d"),a.fillStyle=e.backgroundColor,a.clearRect(0,0,B*(m+1),r*(m+1)),a.fillRect(0,0,B*(m+1),r*(m+1))):(a.textContent="",a.style.backgroundColor=e.backgroundColor,a.style.position=
    "relative")}),c=B;c--;)for(w[c]=[],d=r;d--;)w[c][d]=!0;else{c=document.createElement("canvas").getContext("2d");c.fillStyle=e.backgroundColor;c.fillRect(0,0,1,1);for(var h=c.getImageData(0,0,1,1).data,k=b.getContext("2d").getImageData(0,0,B*m,r*m).data,c=B,l,n;c--;)for(w[c]=[],d=r;d--;){n=m;a:for(;n--;)for(l=m;l--;)for(g=4;g--;)if(k[4*((d*m+n)*B*m+(c*m+l))+g]!==h[g]){w[c][d]=!1;break a}!1!==w[c][d]&&(w[c][d]=!0)}k=c=h=void 0}if(e.hover||e.click){U=!0;for(c=B+1;c--;)V[c]=[];e.hover&&b.addEventListener("mousemove",
    ba);e.click&&(b.addEventListener("click",X),b.addEventListener("touchstart",X),b.addEventListener("touchend",function(a){a.preventDefault()}),b.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)");b.addEventListener("wordcloudstart",function v(){b.removeEventListener("wordcloudstart",v);b.removeEventListener("mousemove",ba);b.removeEventListener("click",X);W=void 0})}g=0;var p,q;0!==e.wait?(p=window.setTimeout,q=window.clearTimeout):(p=window.setImmediate,q=window.clearImmediate);var t=function(b,c){a.forEach(function(a){a.removeEventListener(b,
    c)},this)},u=function v(){t("wordcloudstart",v);q(y)};(function(b,c){a.forEach(function(a){a.addEventListener(b,c)},this)})("wordcloudstart",u);var y=p(function H(){if(g>=e.list.length)q(y),S("wordcloudstop",!1),t("wordcloudstart",u);else{L=(new Date).getTime();var a=da(e.list[g]),a=!S("wordclouddrawn",!0,{item:e.list[g],drawn:a});Z()||a?(q(y),e.abort(),S("wordcloudabort",!1),S("wordcloudstop",!1),t("wordcloudstart",u)):(g++,y=p(H,e.wait))}},e.wait)}})()}};p.isSupported=c;p.minFontSize=g;!(d=[],a=
    function(){return p}.apply(l,d),void 0!==a&&(h.exports=a))})(this)}])});